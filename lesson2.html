<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Lesson 2 - Data Sources, Data Wrangling, ggplot2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LearnR!</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="schedule.html">Schedule</a>
</li>
<li>
  <a href="lesson1.html">Lesson 1</a>
</li>
<li>
  <a href="lesson2.html">Lesson 2</a>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="gallery.html">Gallery</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lesson 2 - Data Sources, Data Wrangling, ggplot2</h1>

</div>


<hr>
<div id="r-packages" class="section level1">
<h1>R Packages</h1>
<p>A package is group of code files and associated files that are compiled to provide a library of R functions which serve a common purpose. An example is package ‘xlsx’ which contains functions for use in working with Excel files from R.</p>
<pre><code>install.packages(&#39;xlsx&#39;)
    </code></pre>
<p>The package installs from the CRAN network, a worldwide repository for publicly shared R packages. There are thousands of packages contributed to the CRAN repository for almost any application, scientific or otherwise, you can think of. Packages can be installed from any other repository such as GitHub or just from a .zip file, if the package you are interested in is not on CRAN.</p>
<div id="install-packages-for-this-class" class="section level2">
<h2>Install Packages for this Class</h2>
<p>Packages just need to be installed once on your machine, however, many packages are frequently updated.</p>
<p>Let’s install the following packages for use in this class:</p>
<pre><code>install.packages(&#39;dplyr&#39;) #This is a group of very powerful data wrangling functions.

install.packages(&#39;data.table&#39;) #Another popular and very powerful data wrangling package, popular with people processing large amounts of data.

install.packages(&#39;ggplot2) #A VERY popular visualization and plotting package.

</code></pre>
</div>
<div id="loading-packages-to-local-memory" class="section level2">
<h2>Loading Packages to Local Memory</h2>
<p><code>library(dplyr)</code> <code>library(ggplot2)</code> <code>library(data.table)</code></p>
<div id="see-where-you-packages-are" class="section level3">
<h3>See where you packages are:</h3>
<p><code>.libPaths()</code></p>
</div>
</div>
</div>
<div id="getting-data-into-r" class="section level1">
<h1>Getting Data into R</h1>
<div id="common-data-sources" class="section level2">
<h2>Common Data Sources</h2>
<ul>
<li>CSV file</li>
<li>Tab delimited file</li>
<li>Excel file</li>
<li>Download a file from the internet</li>
<li>Read a file from the internet</li>
<li>Web APIs</li>
<li>Scrape webpages</li>
</ul>
<div id="download-file" class="section level3">
<h3>Download File</h3>
<p><code>download.file()</code></p>
<p>Download the long format file <code>lesson2Data1.xlsx</code></p>
<pre class="r"><code>download.file(&#39;https://stantec-my.sharepoint.com/:x:/r/personal/peter_eernisse_stantec_com/Documents/LearnR/Data/lesson2Data1.csv&#39;, destfile = &#39;./data/lesson2Data1.csv&#39;,mode = &#39;wb&#39;)</code></pre>
<p>Download the wide format file <code>wideData.csv</code></p>
<pre class="r"><code>download.file(&#39;https://stantec-my.sharepoint.com/:x:/r/personal/peter_eernisse_stantec_com/Documents/LearnR/Data/wideData.csv&#39;, destfile = &#39;./data/wideData.csv&#39;,mode = &#39;wb&#39;)</code></pre>
</div>
<div id="import-from-file" class="section level3">
<h3>Import from file</h3>
<p>Read these data files into local memory so we can do stuff with the data.</p>
<div id="reading-from-csv" class="section level4">
<h4>Reading from CSV</h4>
<pre class="r"><code>#Read csv file
longData&lt;-read.csv(&#39;./data/lesson2Data1.csv&#39;, stringsAsFactors = FALSE)</code></pre>
<pre class="r"><code>#Read csv file
wideData&lt;-read.csv(&#39;./data/wideData.csv&#39;, stringsAsFactors = FALSE,header = FALSE)</code></pre>
</div>
<div id="reading-from-excel-.xlsx" class="section level4">
<h4>Reading from Excel .xlsx</h4>
<hr>
</div>
</div>
</div>
</div>
<div id="inevitible-data-wrangling" class="section level1">
<h1>Inevitible Data Wrangling</h1>
<p>Filtering, selecting and arranging the data is all part of setting up for your analysis. The <code>dplyr</code> package provides a powerful set of functions for data manipulation. Also see <code>data.table</code>. Here, we will focus on <code>dplyr</code>.</p>
<div id="intoduction-to-dplyr" class="section level2">
<h2>Intoduction to dplyr</h2>
<p>We have two datasets in memory right now, one in long format and one in wide format.</p>
<p><code>What the what is Peter talking about right now?</code></p>
<div id="long-format-data" class="section level3">
<h3>Long Format Data</h3>
<p>This format is most useful for computerized statistical analysis, database data storage, and for analytical plotting.</p>
<pre class="r"><code>lf&lt;-longData %&gt;% select(LOC_ID, EASTING,NORTHING,SAMP_DATE,CHEM_CODE,RESULT,UNITS) %&gt;% .[1:10,]
lf</code></pre>
<pre><code>##    LOC_ID EASTING NORTHING SAMP_DATE CHEM_CODE RESULT UNITS
## 1    CC-1 1654951 436022.6 31-Oct-10      ALKC    0.0  MG/L
## 2    CC-1 1654951 436022.6 31-Oct-10      ALKB   15.9  MG/L
## 3    CC-1 1654951 436022.6 31-Oct-10      ALKH    0.0  MG/L
## 4   RC-16 1655221 436795.0 31-Oct-10       ALK   10.7  MG/L
## 5   RC-16 1655221 436795.0 31-Oct-10      ALKC    0.0  MG/L
## 6   RC-16 1655221 436795.0 31-Oct-10      ALKB   10.7  MG/L
## 7   RC-16 1655221 436795.0 31-Oct-10      ALKH    0.0  MG/L
## 8    CC-2 1655241 436735.0 31-Oct-10       ALK   12.9  MG/L
## 9    CC-2 1655241 436735.0 31-Oct-10      ALKC    0.0  MG/L
## 10   CC-2 1655241 436735.0 31-Oct-10      ALKB   12.9  MG/L</code></pre>
</div>
<div id="wide-format-data" class="section level3">
<h3>Wide Format Data</h3>
<p>This data format is most useful for printing out on paper and then looking at it with your eyes. If you want to address analytical questions with a dataset like this, you will need paper, pencils, highlighters, maybe colored tape, and a calculator.</p>
<ul>
<li>Inconsistent spelling</li>
<li>Wrong format</li>
</ul>
<hr>
</div>
</div>
</div>
<div id="basic-ggplot2-plotting" class="section level1">
<h1>Basic ggplot2 Plotting</h1>
<hr>
</div>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
